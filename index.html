<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ‰è²è–ç¶“ (ä¸­è‹±å°ç…§ç‰ˆ)</title>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        body {
            margin: 0;
            font-family: "Microsoft JhengHei", "Segoe UI", Arial, sans-serif;
            background-color: #f4f6f8;
            color: #333;
        }

        /* --- é ‚éƒ¨å°èˆªèˆ‡æœå°‹ --- */
        .navbar {
            background-color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .search-container {
            flex: 1;
            max-width: 500px;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            background-color: #f0f2f5;
            border-radius: 20px;
            font-size: 16px;
            outline: none;
            box-sizing: border-box;
        }

        .search-input:focus {
            background-color: #fff;
            border-color: #1abc9c;
        }

        /* --- é¡¯ç¤ºæ¨¡å¼é¸æ“‡å™¨ --- */
        .display-mode-selector select {
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid #ddd;
            background-color: #fff;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            color: #555;
        }

        /* --- æ©«å‘æ›¸å·å°è¦½åˆ— --- */
        .book-nav-container {
            background-color: #2c3e50;
            white-space: nowrap;
            overflow-x: auto;
            padding: 0 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 60px;
            /* æ ¹æ“š navbar é«˜åº¦èª¿æ•´ */
            z-index: 999;
            -webkit-overflow-scrolling: touch;
        }

        .book-nav-container::-webkit-scrollbar {
            height: 4px;
        }

        .book-nav-container::-webkit-scrollbar-thumb {
            background: #7f8c8d;
            border-radius: 2px;
        }

        .book-nav-item {
            display: inline-block;
            padding: 15px 12px;
            color: #bdc3c7;
            text-decoration: none;
            font-size: 15px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .book-nav-item:hover {
            color: #fff;
        }

        .book-nav-item.active {
            color: #fff;
            font-weight: bold;
            border-bottom: 3px solid #1abc9c;
            background-color: rgba(255, 255, 255, 0.05);
        }

        /* --- å…§å®¹å€ --- */
        .main-content {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            min-height: 80vh;
        }

        .book-title {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
        }

        /* ç« ç¯€æŒ‰éˆ• */
        .chapter-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .chapter-link {
            display: inline-block;
            text-align: center;
            min-width: 30px;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            color: #2c3e50;
            background-image: linear-gradient(to top, #e6c59b 0%, #f5deb3 100%);
            font-weight: bold;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            user-select: none;
        }

        /* --- æ’­æ”¾æ§åˆ¶åˆ— --- */
        .playback-control-bar {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #1abc9c;
        }

        .control-input {
            width: 50px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            text-align: center;
            font-size: 16px;
        }

        select.control-input {
            width: auto;
            cursor: pointer;
            background-color: #f9f9f9;
        }

        .btn-play {
            padding: 8px 20px;
            background-color: #1abc9c;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: 0.2s;
        }

        .btn-play:hover {
            background-color: #16a085;
        }

        .btn-stop {
            padding: 8px 15px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        .btn-stop:hover {
            background-color: #c0392b;
        }

        /* --- ç¶“æ–‡åˆ—è¡¨ --- */
        .scripture-content {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            min-height: 200px;
        }

        .verse-row {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            color: #333;
            transition: background 0.3s;
        }

        .verse-row:last-child {
            border-bottom: none;
        }

        /* æ­£åœ¨æ’­æ”¾çš„é«˜äº®æ¨£å¼ */
        .verse-row.playing {
            background-color: #e8f8f5;
            border-left: 4px solid #1abc9c;
        }

        .verse-num {
            color: #1abc9c;
            font-size: 0.85em;
            margin-right: 8px;
            font-weight: bold;
            vertical-align: top;
            display: inline-block;
            margin-top: 2px;
            user-select: none;
        }

        /* ç¶“æ–‡æ–‡å­—å®¹å™¨ */
        .verse-text-container {
            display: inline-block;
            width: 90%;
            vertical-align: top;
        }

        .text-zh {
            font-size: 19px;
            line-height: 1.6;
            display: block;
            margin-bottom: 4px;
        }

        .text-en {
            font-size: 16px;
            line-height: 1.4;
            color: #666;
            font-family: Georgia, serif;
            display: block;
        }

        /* --- åº•éƒ¨å°èˆªæŒ‰éˆ• --- */
        .bottom-nav-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-bottom: 40px;
            gap: 20px;
        }

        .btn-nav {
            flex: 1;
            padding: 12px;
            background-color: #34495e;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .btn-nav:hover {
            background-color: #2c3e50;
        }

        .btn-nav:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
            color: #95a5a6;
        }

        /* --- è¼‰å…¥æ›´å¤šæŒ‰éˆ• --- */
        .btn-load-more {
            width: 100%;
            padding: 15px;
            margin-top: 15px;
            background-color: #ecf0f1;
            color: #7f8c8d;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }

        .btn-load-more:hover {
            background-color: #bdc3c7;
            color: #fff;
        }

        /* æœå°‹çµæœæ¨£å¼ */
        .search-section-title {
            margin: 20px 0 10px 0;
            color: #2c3e50;
            font-size: 1.1em;
            font-weight: bold;
            border-bottom: 2px solid #eee;
            padding-bottom: 5px;
        }

        .book-result-item {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
            font-size: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.1s;
        }

        .book-result-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }

        .search-result-item {
            background: #fff;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 8px;
            cursor: pointer;
            border-left: 5px solid #1abc9c;
        }

        .highlight {
            background-color: #fff3cd;
            color: #d35400;
            font-weight: bold;
        }

        #loading-msg {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 3000;
        }
    </style>
</head>

<body>
    <div id="loading-msg">æ­£åœ¨è®€å–è–ç¶“è³‡æ–™åº« (ä¸­è‹±å°ç…§)...</div>

    <nav class="navbar">
        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="è¼¸å…¥é—œéµå­— (ç©ºæ ¼å¯åˆ†éš”ï¼Œå¦‚: æƒç¾… é€¼è¿«)"
                oninput="handleSearch(this.value)" disabled>
        </div>

        <div class="display-mode-selector">
            <select id="modeSelect" onchange="changeDisplayMode(this.value)">
                <option value="zh" selected>ä¸­æ–‡ zh</option>
                <option value="en">en (KJV)</option>
                <option value="both">ä¸­è‹±å°ç…§</option>
            </select>
        </div>
    </nav>

    <div id="bookNav" class="book-nav-container"></div>

    <div class="main-content">
        <div id="search-view" style="display: none;">
            <div id="search-results-content"></div>
        </div>

        <div id="read-view">
            <h1 id="currentBookTitle" class="book-title">å‰µä¸–è¨˜</h1>
            <div id="chapterContainer" class="chapter-list"></div>

            <div id="playbackControls" class="playback-control-bar" style="display: none;">
                <span>ç¬¬</span>
                <input type="number" id="startVerseInput" class="control-input" min="1" value="1">
                <span>ç¯€ â€” ç¬¬</span>
                <input type="number" id="endVerseInput" class="control-input" min="1" value="1">
                <span>ç¯€</span>

                <span style="margin-left: 10px;">é€Ÿåº¦</span>
                <select id="speedSelect" class="control-input" onchange="changeSpeed(this.value)">
                    <option value="0.8">0.8x</option>
                    <option value="1" selected>1.0x</option>
                    <option value="1.25">1.25x</option>
                    <option value="1.5">1.5x</option>
                </select>

                <button class="btn-play" onclick="playRange()">â–¶ æ’­æ”¾</button>
                <button class="btn-stop" onclick="stopAudio()">â¹</button>
            </div>

            <div id="scriptureText" class="scripture-content" style="display:none;"></div>

            <div id="bottomNav" class="bottom-nav-container" style="display: none;">
                <button id="btnPrevChap" class="btn-nav" onclick="prevChapter()">
                    &laquo; ä¸Šä¸€ç« 
                </button>
                <button id="btnNextChap" class="btn-nav" onclick="nextChapter()">
                    ä¸‹ä¸€ç«  &raquo;
                </button>
            </div>
        </div>
    </div>

    <script>
        // æ›¸å·è³‡æ–™ (æ–°å¢ bookEN æ¬„ä½)
        const bibleDataStructure = [
            { "book": "å‰µä¸–è¨˜", "bookEN": "Genesis", "chapters": [31, 25, 24, 26, 32, 22, 24, 22, 29, 32, 32, 20, 18, 24, 21, 16, 27, 33, 38, 18, 34, 24, 20, 67, 34, 35, 46, 22, 35, 43, 55, 32, 20, 31, 29, 43, 36, 30, 23, 23, 57, 38, 34, 34, 28, 34, 31, 22, 33, 26] },
            { "book": "å‡ºåŸƒåŠè¨˜", "bookEN": "Exodus", "chapters": [22, 25, 22, 31, 23, 30, 25, 32, 35, 29, 10, 51, 22, 31, 27, 36, 16, 27, 25, 26, 36, 31, 33, 18, 40, 37, 21, 43, 46, 38, 18, 35, 23, 35, 35, 38, 29, 31, 43, 38] },
            { "book": "åˆ©æœªè¨˜", "bookEN": "Leviticus", "chapters": [17, 16, 17, 35, 19, 30, 38, 36, 24, 20, 47, 8, 59, 57, 33, 34, 16, 30, 37, 27, 24, 33, 44, 23, 55, 46, 34] },
            { "book": "æ°‘æ•¸è¨˜", "bookEN": "Numbers", "chapters": [54, 34, 51, 49, 31, 27, 89, 26, 23, 36, 35, 16, 33, 45, 41, 50, 13, 32, 22, 29, 35, 41, 30, 25, 18, 65, 23, 31, 40, 16, 54, 42, 56, 29, 34, 13] },
            { "book": "ç”³å‘½è¨˜", "bookEN": "Deuteronomy", "chapters": [46, 37, 29, 49, 33, 25, 26, 20, 29, 22, 32, 32, 18, 29, 23, 22, 20, 22, 21, 20, 23, 30, 25, 22, 19, 19, 26, 68, 29, 20, 30, 52, 29, 12] },
            { "book": "ç´„æ›¸äºè¨˜", "bookEN": "Joshua", "chapters": [18, 24, 17, 24, 15, 27, 26, 35, 27, 43, 23, 24, 33, 15, 63, 10, 18, 28, 51, 9, 45, 34, 16, 33] },
            { "book": "å£«å¸«è¨˜", "bookEN": "Judges", "chapters": [36, 23, 31, 24, 31, 40, 25, 35, 57, 18, 40, 15, 25, 20, 20, 31, 13, 31, 30, 48, 25] },
            { "book": "è·¯å¾—è¨˜", "bookEN": "Ruth", "chapters": [22, 23, 18, 22] },
            { "book": "æ’’æ¯è€³è¨˜ä¸Š", "bookEN": "1 Samuel", "chapters": [28, 36, 21, 22, 12, 21, 17, 22, 27, 27, 15, 25, 23, 52, 35, 23, 58, 30, 24, 42, 15, 23, 29, 22, 44, 25, 12, 25, 11, 31, 13] },
            { "book": "æ’’æ¯è€³è¨˜ä¸‹", "bookEN": "2 Samuel", "chapters": [27, 32, 39, 12, 25, 23, 29, 18, 13, 19, 27, 31, 39, 33, 37, 23, 29, 33, 43, 26, 22, 51, 39, 25] },
            { "book": "åˆ—ç‹ç´€ä¸Š", "bookEN": "1 Kings", "chapters": [53, 46, 28, 34, 18, 38, 51, 66, 28, 29, 43, 33, 34, 31, 34, 34, 24, 46, 21, 43, 29, 53] },
            { "book": "åˆ—ç‹ç´€ä¸‹", "bookEN": "2 Kings", "chapters": [18, 25, 27, 44, 27, 33, 20, 29, 37, 36, 21, 21, 25, 29, 38, 20, 41, 37, 37, 21, 26, 20, 37, 20, 30] },
            { "book": "æ­·ä»£å¿—ä¸Š", "bookEN": "1 Chronicles", "chapters": [54, 55, 24, 43, 26, 81, 40, 40, 44, 14, 47, 40, 14, 17, 29, 43, 27, 17, 19, 8, 30, 19, 32, 31, 31, 32, 34, 21, 30] },
            { "book": "æ­·ä»£å¿—ä¸‹", "bookEN": "2 Chronicles", "chapters": [17, 18, 17, 22, 14, 42, 22, 18, 31, 19, 23, 16, 22, 15, 19, 14, 19, 34, 11, 37, 20, 12, 21, 27, 28, 23, 9, 27, 36, 27, 21, 33, 25, 33, 27, 23] },
            { "book": "ä»¥æ–¯æ‹‰è¨˜", "bookEN": "Ezra", "chapters": [11, 70, 13, 24, 17, 22, 28, 36, 15, 44] },
            { "book": "å°¼å¸Œç±³è¨˜", "bookEN": "Nehemiah", "chapters": [11, 20, 32, 23, 19, 19, 73, 18, 38, 39, 36, 47, 31] },
            { "book": "ä»¥æ–¯å¸–è¨˜", "bookEN": "Esther", "chapters": [22, 23, 15, 17, 14, 14, 10, 17, 32, 3] },
            { "book": "ç´„ä¼¯è¨˜", "bookEN": "Job", "chapters": [22, 13, 26, 21, 27, 30, 21, 22, 35, 22, 20, 25, 28, 22, 35, 22, 16, 21, 29, 29, 34, 30, 17, 25, 6, 14, 23, 28, 25, 31, 40, 22, 33, 37, 16, 33, 24, 41, 30, 24, 34, 17] },
            { "book": "è©©ç¯‡", "bookEN": "Psalms", "chapters": [6, 12, 8, 8, 12, 10, 17, 9, 20, 18, 7, 8, 6, 7, 5, 11, 15, 50, 14, 9, 13, 31, 6, 10, 22, 12, 14, 9, 11, 12, 24, 11, 22, 22, 28, 12, 40, 22, 13, 17, 13, 11, 5, 26, 17, 11, 9, 14, 20, 23, 19, 9, 6, 7, 23, 13, 11, 11, 17, 12, 8, 12, 11, 10, 13, 20, 7, 35, 36, 5, 24, 20, 28, 23, 10, 12, 20, 72, 13, 19, 16, 8, 18, 12, 13, 17, 7, 18, 52, 17, 16, 15, 5, 23, 11, 13, 12, 9, 9, 5, 8, 28, 22, 35, 45, 48, 43, 13, 31, 7, 10, 10, 9, 8, 18, 19, 2, 29, 176, 7, 8, 9, 4, 8, 5, 6, 5, 6, 8, 8, 3, 18, 3, 3, 21, 26, 9, 8, 24, 13, 10, 7, 12, 15, 21, 10, 20, 14, 9, 6] },
            { "book": "ç®´è¨€", "bookEN": "Proverbs", "chapters": [33, 22, 35, 27, 23, 35, 27, 36, 18, 32, 31, 28, 25, 35, 33, 33, 28, 24, 29, 30, 31, 29, 35, 34, 28, 28, 27, 28, 27, 33, 31] },
            { "book": "å‚³é“æ›¸", "bookEN": "Ecclesiastes", "chapters": [18, 26, 22, 16, 20, 12, 29, 17, 18, 20, 10, 14] },
            { "book": "é›…æ­Œ", "bookEN": "Song of Solomon", "chapters": [17, 17, 11, 16, 16, 13, 13, 14] },
            { "book": "ä»¥è³½äºæ›¸", "bookEN": "Isaiah", "chapters": [31, 22, 26, 6, 30, 13, 25, 22, 21, 34, 16, 6, 22, 32, 9, 14, 14, 7, 25, 6, 17, 25, 18, 23, 12, 21, 13, 29, 24, 33, 9, 20, 24, 17, 10, 22, 38, 22, 8, 31, 29, 25, 28, 28, 25, 13, 15, 22, 26, 11, 23, 15, 12, 17, 13, 12, 21, 14, 21, 22, 11, 12, 19, 12, 25, 24] },
            { "book": "è€¶åˆ©ç±³æ›¸", "bookEN": "Jeremiah", "chapters": [19, 37, 25, 31, 31, 30, 34, 22, 26, 25, 23, 17, 27, 22, 21, 21, 27, 23, 15, 18, 14, 30, 40, 10, 38, 24, 22, 17, 32, 24, 40, 44, 26, 22, 19, 32, 21, 28, 18, 16, 18, 22, 13, 30, 5, 28, 7, 47, 39, 46, 64, 34] },
            { "book": "è€¶åˆ©ç±³å“€æ­Œ", "bookEN": "Lamentations", "chapters": [22, 22, 66, 22, 22] },
            { "book": "ä»¥è¥¿çµæ›¸", "bookEN": "Ezekiel", "chapters": [28, 10, 27, 17, 17, 14, 27, 18, 11, 22, 25, 28, 23, 23, 8, 63, 24, 32, 14, 49, 32, 31, 49, 27, 17, 21, 36, 26, 21, 26, 18, 32, 33, 31, 15, 38, 28, 23, 29, 49, 26, 20, 27, 31, 25, 24, 23, 35] },
            { "book": "ä½†ä»¥ç†æ›¸", "bookEN": "Daniel", "chapters": [21, 49, 30, 37, 31, 28, 28, 27, 27, 21, 45, 13] },
            { "book": "ä½•è¥¿é˜¿æ›¸", "bookEN": "Hosea", "chapters": [11, 23, 5, 19, 15, 11, 16, 14, 17, 15, 12, 14, 16, 9] },
            { "book": "ç´„ç¥æ›¸", "bookEN": "Joel", "chapters": [20, 32, 21] },
            { "book": "é˜¿æ‘©å¸æ›¸", "bookEN": "Amos", "chapters": [15, 16, 15, 13, 27, 14, 17, 14, 15] },
            { "book": "ä¿„å·´åº•äºæ›¸", "bookEN": "Obadiah", "chapters": [21] },
            { "book": "ç´„æ‹¿æ›¸", "bookEN": "Jonah", "chapters": [17, 10, 10, 11] },
            { "book": "å½Œè¿¦æ›¸", "bookEN": "Micah", "chapters": [16, 13, 12, 13, 15, 16, 20] },
            { "book": "é‚£é´»æ›¸", "bookEN": "Nahum", "chapters": [15, 13, 19] },
            { "book": "å“ˆå·´è°·æ›¸", "bookEN": "Habakkuk", "chapters": [17, 20, 19] },
            { "book": "è¥¿ç•ªé›…æ›¸", "bookEN": "Zephaniah", "chapters": [18, 15, 20] },
            { "book": "å“ˆè©²æ›¸", "bookEN": "Haggai", "chapters": [15, 23] },
            { "book": "æ’’è¿¦åˆ©äºæ›¸", "bookEN": "Zechariah", "chapters": [21, 13, 10, 14, 11, 15, 14, 23, 17, 12, 17, 14, 9, 21] },
            { "book": "ç‘ªæ‹‰åŸºæ›¸", "bookEN": "Malachi", "chapters": [14, 17, 18, 6] },
            { "book": "é¦¬å¤ªç¦éŸ³", "bookEN": "Matthew", "chapters": [25, 23, 17, 25, 48, 34, 29, 34, 38, 42, 30, 50, 58, 36, 39, 28, 27, 35, 30, 34, 46, 46, 39, 51, 46, 75, 66, 20] },
            { "book": "é¦¬å¯ç¦éŸ³", "bookEN": "Mark", "chapters": [45, 28, 35, 41, 43, 56, 37, 38, 50, 52, 33, 44, 37, 72, 47, 20] },
            { "book": "è·¯åŠ ç¦éŸ³", "bookEN": "Luke", "chapters": [80, 52, 38, 44, 39, 49, 50, 56, 62, 42, 54, 59, 35, 35, 32, 31, 37, 43, 48, 47, 38, 71, 56, 53] },
            { "book": "ç´„ç¿°ç¦éŸ³", "bookEN": "John", "chapters": [51, 25, 36, 54, 47, 71, 53, 59, 41, 42, 57, 50, 38, 31, 27, 33, 26, 40, 42, 31, 25] },
            { "book": "ä½¿å¾’è¡Œå‚³", "bookEN": "Acts", "chapters": [26, 47, 26, 37, 42, 15, 60, 40, 43, 48, 30, 25, 52, 28, 41, 40, 34, 28, 41, 38, 40, 30, 35, 27, 27, 32, 44, 31] },
            { "book": "ç¾…é¦¬æ›¸", "bookEN": "Romans", "chapters": [32, 29, 31, 25, 21, 23, 25, 39, 33, 21, 36, 21, 14, 23, 33, 27] },
            { "book": "å“¥æ—å¤šå‰æ›¸", "bookEN": "1 Corinthians", "chapters": [31, 16, 23, 21, 13, 20, 40, 13, 27, 33, 34, 31, 13, 40, 58, 24] },
            { "book": "å“¥æ—å¤šå¾Œæ›¸", "bookEN": "2 Corinthians", "chapters": [24, 17, 18, 18, 21, 18, 16, 24, 15, 18, 33, 21, 14] },
            { "book": "åŠ æ‹‰å¤ªæ›¸", "bookEN": "Galatians", "chapters": [24, 21, 29, 31, 26, 18] },
            { "book": "ä»¥å¼—æ‰€æ›¸", "bookEN": "Ephesians", "chapters": [23, 22, 21, 32, 33, 24] },
            { "book": "è…“ç«‹æ¯”æ›¸", "bookEN": "Philippians", "chapters": [30, 30, 21, 23] },
            { "book": "æ­Œç¾…è¥¿æ›¸", "bookEN": "Colossians", "chapters": [29, 23, 25, 18] },
            { "book": "å¸–æ’’ç¾…å°¼è¿¦å‰æ›¸", "bookEN": "1 Thessalonians", "chapters": [10, 20, 13, 18, 28] },
            { "book": "å¸–æ’’ç¾…å°¼è¿¦å¾Œæ›¸", "bookEN": "2 Thessalonians", "chapters": [12, 17, 18] },
            { "book": "ææ‘©å¤ªå‰æ›¸", "bookEN": "1 Timothy", "chapters": [20, 15, 16, 16, 25, 21] },
            { "book": "ææ‘©å¤ªå¾Œæ›¸", "bookEN": "2 Timothy", "chapters": [18, 26, 17, 22] },
            { "book": "æå¤šæ›¸", "bookEN": "Titus", "chapters": [16, 15, 15] },
            { "book": "è…“åˆ©é–€æ›¸", "bookEN": "Philemon", "chapters": [25] },
            { "book": "å¸Œä¼¯ä¾†æ›¸", "bookEN": "Hebrews", "chapters": [14, 18, 19, 16, 14, 20, 28, 13, 28, 39, 40, 29, 25] },
            { "book": "é›…å„æ›¸", "bookEN": "James", "chapters": [27, 26, 18, 17, 20] },
            { "book": "å½¼å¾—å‰æ›¸", "bookEN": "1 Peter", "chapters": [25, 25, 22, 19, 14] },
            { "book": "å½¼å¾—å¾Œæ›¸", "bookEN": "2 Peter", "chapters": [21, 22, 18] },
            { "book": "ç´„ç¿°ä¸€æ›¸", "bookEN": "1 John", "chapters": [10, 29, 24, 21, 21] },
            { "book": "ç´„ç¿°äºŒæ›¸", "bookEN": "2 John", "chapters": [13] },
            { "book": "ç´„ç¿°ä¸‰æ›¸", "bookEN": "3 John", "chapters": [15] },
            { "book": "çŒ¶å¤§æ›¸", "bookEN": "Jude", "chapters": [25] },
            { "book": "å•Ÿç¤ºéŒ„", "bookEN": "Revelation", "chapters": [20, 29, 22, 11, 14, 17, 17, 13, 21, 11, 19, 17, 18, 20, 8, 21, 18, 24, 21, 15, 27, 21] }
        ];

        let allScriptures = [];
        let currentChapterVerses = [];
        let playQueue = [];
        let isPlaying = false;
        let synthesis = window.speechSynthesis;
        let currentUtterance = null;
        let currentSpeed = 1.0;

        // é¡¯ç¤ºæ¨¡å¼: 'both', 'zh', 'en'
        let displayMode = 'zh';

        // å…¨åŸŸè®Šæ•¸ï¼šç´€éŒ„ç•¶å‰è®€åˆ°çš„æ›¸å·ç´¢å¼•èˆ‡ç« ç¯€
        let curBookIdx = 0;
        let curChapNum = 1;

        // --- å…¨åŸŸè®Šæ•¸ï¼šæœå°‹åˆ†é ç”¨ ---
        let currentSearchResults = [];
        let currentSearchKeywords = [];
        let searchRenderCount = 0;
        const SEARCH_BATCH_SIZE = 50;

        document.addEventListener("DOMContentLoaded", async () => {
            renderBookNav();

            try {
                // åŒæ™‚è®€å–ä¸­æ–‡å’Œè‹±æ–‡æª”æ¡ˆ
                const [resZH, resEN] = await Promise.all([
                    fetch('input.txt'),
                    fetch('kjv.txt')
                ]);

                if (!resZH.ok) throw new Error("æ‰¾ä¸åˆ° input.txt");
                // å¦‚æœ kjv.txt æ‰¾ä¸åˆ°ï¼Œæˆ‘å€‘é‚„æ˜¯å¯ä»¥ç¹¼çºŒï¼Œåªæ˜¯è‹±æ–‡æœƒæ˜¯ç©ºçš„
                const textZH = await resZH.text();
                const textEN = resEN.ok ? await resEN.text() : "";

                parseBibleText(textZH, textEN);

                document.getElementById('loading-msg').style.display = 'none';
                document.getElementById('searchInput').disabled = false;

                // é è¨­: å‰µä¸–è¨˜ ç¬¬ä¸€ç« 
                selectBook(0);

            } catch (err) {
                document.getElementById('loading-msg').textContent = "è®€å–å¤±æ•—: è«‹ç¢ºèª input.txt èˆ‡ kjv.txt å­˜åœ¨";
                console.error(err);
            }
        });

        // æ ¸å¿ƒä¿®æ­£ï¼šåŒæ™‚è§£æä¸­æ–‡èˆ‡è‹±æ–‡ï¼Œä¸¦è™•ç†è¡Œæ•¸ä¸ä¸€è‡´çš„å•é¡Œ
        function parseBibleText(rawZH, rawEN) {
            const linesZH = rawZH.split(/\r?\n/);
            const linesEN = rawEN.split(/\r?\n/);

            let idxZH = 0;
            let idxEN = 0;
            const totalLinesZH = linesZH.length;
            const totalLinesEN = linesEN.length;
            let globalAudioIndex = 1;

            bibleDataStructure.forEach((book, bIndex) => {
                const bookName = book.book;

                // æª¢æŸ¥æ˜¯å¦ç‚ºç´„ç¿°ä¸‰æ›¸ (index 63)
                // é‚è¼¯: 
                // CUV ç´„ç¿°ä¸‰æ›¸æœ‰ 15 ç¯€ (14, 15 åˆ†é–‹)
                // KJV ç´„ç¿°ä¸‰æ›¸æœ‰ 14 ç¯€ (14, 15 åˆä½µç‚º 14)
                const is3John = (bIndex === 63); // ç´¢å¼•å¾0é–‹å§‹ï¼Œç´„ç¿°ä¸‰æ›¸é€šå¸¸æ˜¯ç¬¬64å·(index 63)

                book.chapters.forEach((verseCount, chapIdx) => {
                    const realChapter = chapIdx + 1;

                    for (let v = 1; v <= verseCount; v++) {
                        let zhText = "";
                        let enText = "";

                        // è®€å–ä¸­æ–‡è¡Œ
                        if (idxZH < totalLinesZH) {
                            zhText = linesZH[idxZH].trim();
                            idxZH++;
                        }

                        // è®€å–è‹±æ–‡è¡Œ (ç‰¹æ®Šè™•ç†ç´„ç¿°ä¸‰æ›¸ç¬¬15ç¯€)
                        if (is3John && v === 15) {
                            // å’Œåˆæœ¬æœ‰ç¬¬15ç¯€ï¼ŒKJVæ²’æœ‰
                            // é€™è£¡æˆ‘å€‘ä¸è®€å–ä¸‹ä¸€è¡Œè‹±æ–‡ï¼Œè®“è‹±æ–‡ç´¢å¼•åœç•™åœ¨åŸåœ°(æˆ–æ˜¯å·²çµæŸ)
                            enText = "(KJV merges this into v14)";
                        } else {
                            // æ­£å¸¸è®€å–
                            if (idxEN < totalLinesEN) {
                                enText = linesEN[idxEN].trim();
                                idxEN++;
                            }
                        }

                        allScriptures.push({
                            book: bookName,
                            chapter: realChapter,
                            verse: v,
                            textZH: zhText,
                            textEN: enText,
                            id: globalAudioIndex
                        });
                        globalAudioIndex++;
                    }
                });
            });

            console.log(`è§£æå®Œæˆ: ä¸­æ–‡è®€å–åˆ° ${idxZH} è¡Œ, è‹±æ–‡è®€å–åˆ° ${idxEN} è¡Œ`);
        }

        function renderBookNav() {
            const navContainer = document.getElementById("bookNav");
            navContainer.innerHTML = "";
            bibleDataStructure.forEach((item, index) => {
                const span = document.createElement("span");
                span.className = "book-nav-item";
                span.textContent = item.book;
                span.onclick = () => selectBook(index);
                navContainer.appendChild(span);
            });
        }

        // --- æ–°å¢ï¼šæ ¹æ“šæ¨¡å¼æ›´æ–°æ¨™é¡Œæ–‡å­— ---
        function updateBookTitle() {
            const currentBook = bibleDataStructure[curBookIdx];
            const titleEl = document.getElementById("currentBookTitle");

            if (displayMode === 'zh') {
                titleEl.textContent = currentBook.book;
            } else if (displayMode === 'en') {
                titleEl.textContent = currentBook.bookEN;
            } else {
                // both æ¨¡å¼ï¼šåŒæ™‚é¡¯ç¤º
                titleEl.textContent = `${currentBook.book} ${currentBook.bookEN}`;
            }
        }

        // --- ä¿®æ”¹ï¼šåˆ‡æ›æ¨¡å¼æ™‚ï¼Œä¹Ÿè¦æ›´æ–°æ¨™é¡Œ ---
        function changeDisplayMode(mode) {
            displayMode = mode;

            // 1. æ›´æ–°æ¨™é¡Œ
            updateBookTitle();

            // 2. é‡æ–°è¼‰å…¥ç¶“æ–‡å…§å®¹
            const bookName = bibleDataStructure[curBookIdx].book;
            loadChapterText(bookName, curChapNum);
        }

        // --- ä¿®æ”¹ï¼šé¸æ“‡æ›¸å·æ™‚ï¼Œä½¿ç”¨æ–°å‡½å¼è¨­å®šæ¨™é¡Œ ---
        function selectBook(index) {
            curBookIdx = index;

            document.getElementById("read-view").style.display = "block";
            document.getElementById("search-view").style.display = "none";
            document.getElementById("searchInput").value = "";

            // ä¿®æ”¹é€™è£¡ï¼šä¸å†ç›´æ¥è¨­å®š textContentï¼Œè€Œæ˜¯å‘¼å«å‡½å¼
            updateBookTitle();

            const currentBook = bibleDataStructure[index];
            // (åŸæœ¬é€™è¡Œ document.getElementById("currentBookTitle").textContent = currentBook.book; åˆªé™¤)

            const navItems = document.querySelectorAll('.book-nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            navItems[index].classList.add('active');
            navItems[index].scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });

            const container = document.getElementById("chapterContainer");
            container.innerHTML = "";

            currentBook.chapters.forEach((_, i) => {
                const chapterNum = i + 1;
                const displayNum = chapterNum < 10 ? `0${chapterNum}` : chapterNum;
                const link = document.createElement("div");
                link.className = "chapter-link";
                link.textContent = displayNum;

                link.onclick = () => {
                    updateChapterActiveState(link);
                    loadChapterText(currentBook.book, chapterNum);
                };

                if (i === 0) {
                    link.style.backgroundColor = "#2c3e50";
                    link.style.color = "#fff";
                }
                container.appendChild(link);
            });

            loadChapterText(currentBook.book, 1);
        }
        function updateChapterActiveState(activeLink) {
            if (!activeLink) return;
            document.querySelectorAll('.chapter-link').forEach(el => {
                el.style.backgroundColor = "#e6c59b";
                el.style.backgroundImage = "linear-gradient(to top, #e6c59b 0%, #f5deb3 100%)";
                el.style.color = "#2c3e50";
            });
            activeLink.style.background = "#2c3e50";
            activeLink.style.color = "#fff";
        }

        function highlightCurrentChapterBtn(chapNum) {
            const container = document.getElementById("chapterContainer");
            const targetBtn = container.children[chapNum - 1];
            if (targetBtn) {
                updateChapterActiveState(targetBtn);
            }
        }

        function loadChapterText(bookName, chapterNum) {
            curChapNum = chapterNum;

            const controlBar = document.getElementById("playbackControls");
            controlBar.style.display = "flex";
            document.getElementById("bottomNav").style.display = "flex";

            const container = document.getElementById("scriptureText");
            container.style.display = "block";
            container.innerHTML = "";

            currentChapterVerses = allScriptures.filter(s => s.book === bookName && s.chapter === chapterNum);

            const totalVerses = currentChapterVerses.length;
            const startInput = document.getElementById("startVerseInput");
            const endInput = document.getElementById("endVerseInput");

            startInput.max = totalVerses;
            endInput.max = totalVerses;
            startInput.value = 1;
            endInput.value = totalVerses;

            currentChapterVerses.forEach(v => {
                const row = document.createElement("div");
                row.className = "verse-row";
                row.id = `verse-row-${v.id}`;

                // æ ¹æ“š displayMode æ±ºå®šé¡¯ç¤ºå…§å®¹
                let htmlContent = `<span class="verse-num">${v.verse}</span><div class="verse-text-container">`;

                if (displayMode === 'both' || displayMode === 'zh') {
                    htmlContent += `<span class="text-zh">${v.textZH}</span>`;
                }

                if (displayMode === 'both' || displayMode === 'en') {
                    // å¦‚æœä¸­è‹±å°ç…§ï¼Œä¸”æ²’æœ‰è‹±æ–‡(å¦‚3John:15)ï¼Œå°±ä¸é¡¯ç¤º
                    if (v.textEN && v.textEN !== "(KJV merges this into v14)") {
                        htmlContent += `<span class="text-en">${v.textEN}</span>`;
                    } else if (displayMode === 'en' && v.textEN === "(KJV merges this into v14)") {
                        // ç´”è‹±æ–‡æ¨¡å¼ä¸‹çš„æç¤º
                        htmlContent += `<span class="text-en" style="font-style:italic; color:#999;">[Included in verse 14 in KJV]</span>`;
                    }
                }

                htmlContent += `</div>`;
                row.innerHTML = htmlContent;
                container.appendChild(row);
            });

            stopAudio();
            window.scrollTo({ top: 0 });
            updateBottomNav();
        }

        function updateBottomNav() {
            const prevBtn = document.getElementById("btnPrevChap");
            const nextBtn = document.getElementById("btnNextChap");

            if (curBookIdx === 0 && curChapNum === 1) {
                prevBtn.disabled = true;
            } else {
                prevBtn.disabled = false;
            }

            const currentBookTotalChaps = bibleDataStructure[curBookIdx].chapters.length;
            if (curBookIdx === bibleDataStructure.length - 1 && curChapNum === currentBookTotalChaps) {
                nextBtn.disabled = true;
            } else {
                nextBtn.disabled = false;
            }
        }

        function prevChapter() {
            if (curChapNum > 1) {
                const targetChap = curChapNum - 1;
                const bookName = bibleDataStructure[curBookIdx].book;
                highlightCurrentChapterBtn(targetChap);
                loadChapterText(bookName, targetChap);
            } else if (curBookIdx > 0) {
                const prevBookIdx = curBookIdx - 1;
                const prevBookData = bibleDataStructure[prevBookIdx];
                const targetChap = prevBookData.chapters.length;
                selectBook(prevBookIdx);
                highlightCurrentChapterBtn(targetChap);
                loadChapterText(prevBookData.book, targetChap);
            }
        }

        function nextChapter() {
            const currentBookTotalChaps = bibleDataStructure[curBookIdx].chapters.length;
            if (curChapNum < currentBookTotalChaps) {
                const targetChap = curChapNum + 1;
                const bookName = bibleDataStructure[curBookIdx].book;
                highlightCurrentChapterBtn(targetChap);
                loadChapterText(bookName, targetChap);
            } else if (curBookIdx < bibleDataStructure.length - 1) {
                const nextBookIdx = curBookIdx + 1;
                selectBook(nextBookIdx);
            }
        }

        function changeSpeed(val) {
            currentSpeed = parseFloat(val);
        }

        function playRange() {
            const startVal = parseInt(document.getElementById("startVerseInput").value);
            const endVal = parseInt(document.getElementById("endVerseInput").value);
            const maxVal = currentChapterVerses.length;

            if (isNaN(startVal) || isNaN(endVal) || startVal < 1 || endVal > maxVal || startVal > endVal) {
                alert(`è«‹è¼¸å…¥æ­£ç¢ºç¯„åœ (1 ~ ${maxVal})`);
                return;
            }

            stopAudio();
            const versesToPlay = currentChapterVerses.slice(startVal - 1, endVal);
            playQueue = [...versesToPlay];
            isPlaying = true;
            playNextInQueue();
        }

        function playNextInQueue() {
            if (!isPlaying || playQueue.length === 0) {
                isPlaying = false;
                stopAudio();
                return;
            }

            const verseObj = playQueue.shift();

            document.querySelectorAll('.verse-row').forEach(row => row.classList.remove('playing'));
            const currentRow = document.getElementById(`verse-row-${verseObj.id}`);
            if (currentRow) {
                currentRow.classList.add('playing');
            }

            // åˆ¤æ–·è¦æœ—è®€çš„æ–‡å­—èˆ‡èªè¨€
            let textToSpeak = "";
            let lang = "zh-TW";

            if (displayMode === 'en') {
                // ç´”è‹±æ–‡æ¨¡å¼ï¼šå”¸è‹±æ–‡
                textToSpeak = verseObj.textEN;
                lang = "en-US";
                // è·³éç©ºçš„è‹±æ–‡ç¯€ (å¦‚ 3John 15)
                if (!textToSpeak || textToSpeak.includes("KJV merges")) {
                    playNextInQueue();
                    return;
                }
            } else {
                // é è¨­ (ä¸­è‹±å°ç…§ æˆ– ç´”ä¸­æ–‡)ï¼šå”¸ä¸­æ–‡
                // å¦‚æœæ‚¨å¸Œæœ›ä¸­è‹±å°ç…§æ™‚å”¸å…©ç¨®èªè¨€ï¼Œå¯ä»¥ä¿®æ”¹é€™è£¡
                textToSpeak = verseObj.textZH;
                lang = "zh-TW";
            }

            const utterance = new SpeechSynthesisUtterance(textToSpeak);
            utterance.lang = lang;
            utterance.rate = currentSpeed;
            utterance.pitch = 1.0;

            const voices = synthesis.getVoices();
            let preferredVoice = null;

            if (lang === "zh-TW") {
                preferredVoice = voices.find(v => v.lang === 'zh-TW' && v.name.includes('Google')) ||
                    voices.find(v => v.lang === 'zh-TW');
            } else {
                // è‹±æ–‡èªéŸ³å„ªå…ˆé¸æ“‡
                preferredVoice = voices.find(v => v.lang.startsWith('en') && v.name.includes('Google US')) ||
                    voices.find(v => v.lang.startsWith('en'));
            }

            if (preferredVoice) utterance.voice = preferredVoice;

            utterance.onend = function () {
                if (isPlaying) {
                    playNextInQueue();
                }
            };

            utterance.onerror = function (e) {
                if (e.error === 'canceled') return;
                console.error("èªéŸ³æ’­æ”¾éŒ¯èª¤", e);
                if (isPlaying) playNextInQueue();
            };

            currentUtterance = utterance;
            synthesis.speak(utterance);
        }

        function stopAudio() {
            isPlaying = false;
            playQueue = [];
            if (currentUtterance) {
                currentUtterance.onend = null;
                currentUtterance = null;
            }
            synthesis.cancel();
            document.querySelectorAll('.verse-row').forEach(row => row.classList.remove('playing'));
        }

        function handleSearch(keyword) {
            keyword = keyword.trim();
            const controlBar = document.getElementById("playbackControls");
            const bottomNav = document.getElementById("bottomNav");

            if (keyword === "") {
                document.getElementById("read-view").style.display = "block";
                document.getElementById("search-view").style.display = "none";
                controlBar.style.display = "flex";
                bottomNav.style.display = "flex";
                return;
            }

            document.getElementById("read-view").style.display = "none";
            document.getElementById("search-view").style.display = "block";
            controlBar.style.display = "none";
            bottomNav.style.display = "none";

            const resultsContent = document.getElementById("search-results-content");
            resultsContent.innerHTML = "";

            const keywords = keyword.split(/\s+/).filter(k => k.length > 0);
            if (keywords.length === 0) return;

            // æ›¸å·æœå°‹
            let searchBook = keywords[0];
            let searchChapter = null;
            const digitMatch = keyword.match(/(\d+)$/);
            if (digitMatch) {
                searchChapter = parseInt(digitMatch[1]);
                searchBook = keyword.replace(digitMatch[0], '').trim();
            }

            const matchedBooks = bibleDataStructure.filter(b => b.book.includes(searchBook));

            if (matchedBooks.length > 0) {
                const bookSection = document.createElement("div");
                bookSection.innerHTML = `<div class="search-section-title">æ›¸å·å°èˆª</div>`;
                matchedBooks.forEach(bookItem => {
                    const div = document.createElement("div");
                    div.className = "book-result-item";
                    let targetCh = 1;
                    let displayText = `ğŸ“– å‰å¾€ï¼š${bookItem.book}`;
                    if (searchChapter !== null) {
                        if (searchChapter >= 1 && searchChapter <= bookItem.chapters.length) {
                            targetCh = searchChapter;
                            displayText = `ğŸ“– å‰å¾€ï¼š${bookItem.book} ç¬¬ ${searchChapter} ç« `;
                        } else {
                            displayText = `ğŸ“– å‰å¾€ï¼š${bookItem.book} (æ‰¾ä¸åˆ°ç¬¬${searchChapter}ç« )`;
                        }
                    }
                    div.innerHTML = `<span>${displayText}</span><span class="book-result-arrow">âœ</span>`;
                    div.onclick = () => {
                        const bookIndex = bibleDataStructure.findIndex(b => b.book === bookItem.book);
                        selectBook(bookIndex);
                        highlightCurrentChapterBtn(targetCh);
                        loadChapterText(bookItem.book, targetCh);
                    };
                    bookSection.appendChild(div);
                });
                resultsContent.appendChild(bookSection);
            }

            // ç¶“æ–‡æœå°‹ (é è¨­æœå°‹ä¸­æ–‡)
            currentSearchResults = allScriptures.filter(s => {
                // å¦‚æœä½ è¦åŒæ™‚æœå°‹è‹±æ–‡ï¼Œå¯ä»¥æ”¹æˆ:
                // const fullText = (s.textZH + " " + s.textEN).toLowerCase();
                // ä½†ç‚ºäº†ç²¾æº–åº¦ï¼Œç›®å‰åƒ…æœå°‹ textZH
                return keywords.every(k => s.textZH.includes(k));
            });

            currentSearchKeywords = keywords;
            searchRenderCount = 0;

            const verseSection = document.createElement("div");
            verseSection.id = "verse-search-container";
            resultsContent.appendChild(verseSection);

            if (currentSearchResults.length === 0) {
                if (matchedBooks.length === 0) {
                    verseSection.innerHTML = "<p style='text-align:center; color:#999; margin-top:20px;'>æ‰¾ä¸åˆ°ç¬¦åˆçš„æ›¸å·æˆ–ç¶“æ–‡ã€‚</p>";
                }
            } else {
                verseSection.innerHTML = `<div class="search-section-title">ç¶“æ–‡çµæœ (å…± ${currentSearchResults.length} ç­†)</div>`;
                renderMoreSearchResults();
            }
        }

        function renderMoreSearchResults() {
            const container = document.getElementById("verse-search-container");
            const oldBtn = document.getElementById("btn-load-more-results");
            if (oldBtn) oldBtn.remove();

            const nextBatch = currentSearchResults.slice(searchRenderCount, searchRenderCount + SEARCH_BATCH_SIZE);
            const escapedKeywords = currentSearchKeywords.map(k => k.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'));
            const highlightRegex = new RegExp(`(${escapedKeywords.join('|')})`, 'g');

            nextBatch.forEach(res => {
                const div = document.createElement("div");
                div.className = "search-result-item";
                const highlightedText = res.textZH.replace(highlightRegex, `<span class="highlight">$1</span>`);

                div.innerHTML = `
                    <div style="font-weight:bold; color:#7f8c8d; margin-bottom:5px;">
                        ${res.book} ${res.chapter}:${res.verse}
                    </div>
                    <div style="font-size:18px;">${highlightedText}</div>
                `;

                div.onclick = () => {
                    const bookIndex = bibleDataStructure.findIndex(b => b.book === res.book);
                    selectBook(bookIndex);
                    highlightCurrentChapterBtn(res.chapter);
                    loadChapterText(res.book, res.chapter);
                    setTimeout(() => {
                        const targetRow = document.getElementById(`verse-row-${res.id}`);
                        if (targetRow) {
                            targetRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            targetRow.classList.add('playing');
                            setTimeout(() => targetRow.classList.remove('playing'), 2000);
                        }
                    }, 100);
                };
                container.appendChild(div);
            });

            searchRenderCount += nextBatch.length;
            if (searchRenderCount < currentSearchResults.length) {
                const remaining = currentSearchResults.length - searchRenderCount;
                const btn = document.createElement("button");
                btn.id = "btn-load-more-results";
                btn.className = "btn-load-more";
                btn.textContent = `è¼‰å…¥æ›´å¤š (é‚„æœ‰ ${remaining} ç­†)`;
                btn.onclick = () => renderMoreSearchResults();
                container.appendChild(btn);
            }
        }
    </script>
</body>

</html>